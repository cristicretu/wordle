'use strict'

let grid = document.getElementById('grid')

function createGrid() {
  for (let i = 0; i < 6; ++i) {
    let line = document.createElement('div')

    for (let j = 0; j < 5; ++j) {
      let col = document.createElement('div')
      col.className = 'col'

      line.appendChild(col)
    }

    grid.appendChild(line)
  }
}

let count = 1

function changeGrid() {
  for (let i = 0; i < 6; ++i) {
    let line = grid.children[i]
    for (let j = 0; j < 5; ++j) {
      let col = line.children
      col[j].innerHTML = 'A'
    }
  }
}

const words = [
  'Abate',
  'Aboli',
  'Abona',
  'Abtii',
  'Acasa',
  'Acces',
  'Aceea',
  'Acele',
  'Acest',
  'Acolo',
  'Acord',
  'Activ',
  'Actor',
  'Acuza',
  'Adanc',
  'Adaos',
  'Adica',
  'Admis',
  'Adora',
  'Aduce',
  'Adult',
  'Aduna',
  'Afara',
  'Afuma',
  'Agata',
  'Agita',
  'Agrea',
  'Ajuta',
  'Albie',
  'Album',
  'Albus',
  'Alege',
  'Aliaj',
  'Alina',
  'Aloca',
  'Altar',
  'Aluat',
  'Aluna',
  'Amagi',
  'Amana',
  'Amurg',
  'Amuza',
  'Anexa',
  'Anima',
  'Antic',
  'Anula',
  'Anume',
  'Anunt',
  'Apara',
  'Apasa',
  'Apuca',
  'Apune',
  'Arama',
  'Arata',
  'Arcus',
  'Argou',
  'Aripa',
  'Aroma',
  'Asalt',
  'Asana',
  'Aseza',
  'Aspru',
  'Asuma',
  'Atare',
  'Atasa',
  'Atata',
  'Atent',
  'Atlas',
  'Atlet',
  'Audia',
  'Autor',
  'Avans',
  'Avant',
  'Avere',
  'Avion',
  'Bacon',
  'Bagaj',
  'Baiat',
  'Balet',
  'Balon',
  'Balta',
  'Banal',
  'Banca',
  'Banda',
  'Banui',
  'Baraj',
  'Barba',
  'Barca',
  'Barfi',
  'Bazin',
  'Belea',
  'Beton',
  'Bidon',
  'Bilet',
  'Birou',
  'Bivol',
  'Bizon',
  'Bizui',
  'Blama',
  'Blana',
  'Bland',
  'Bloca',
  'Blond',
  'Bluza',
  'Boaba',
  'Boala',
  'Boboc',
  'Bogat',
  'Boier',
  'Bolta',
  'Borna',
  'Botez',
  'Bresa',
  'Briza',
  'Broda',
  'Bronz',
  'Brusc',
  'Bubui',
  'Bucal',
  'Bucla',
  'Bufet',
  'Bufni',
  'Bufon',
  'Buget',
  'Bujie',
  'Bunic',
  'Bursa',
  'Burta',
  'Buton',
  'Butuc',
  'Cablu',
  'Cacao',
  'Cadea',
  'Cadou',
  'Cadru',
  'Cafea',
  'Caiet',
  'Caine',
  'Calca',
  'Calup',
  'Camin',
  'Campa',
  'Canal',
  'Canoe',
  'Canta',
  'Capac',
  'Capat',
  'Capot',
  'Capra',
  'Carie',
  'Carne',
  'Carpa',
  'Carte',
  'Casca',
  'Casti',
  'Catar',
  'Catel',
  'Catre',
  'Catun',
  'Cauta',
  'Cauza',
  'Cazma',
  'Ceafa',
  'Ceapa',
  'Ceara',
  'Ceata',
  'Ceaun',
  'Cerne',
  'Cersi',
  'Certa',
  'Cetos',
  'Cheie',
  'Chema',
  'Chiar',
  'Chila',
  'Chior',
  'Chist',
  'Chiul',
  'Ciclu',
  'Cifra',
  'Cinci',
  'Cinic',
  'Circa',
  'Citet',
  'Ciuda',
  'Ciuma',
  'Ciupi',
  'Civil',
  'Cizma',
  'Cladi',
  'Clama',
  'Clasa',
  'Clima',
  'Clipa',
  'Clipi',
  'Clovn',
  'Coace',
  'Coada',
  'Coaja',
  'Coama',
  'Coasa',
  'Coase',
  'Cocor',
  'Cocos',
  'Codas',
  'Coleg',
  'Comic',
  'Comod',
  'Comun',
  'Conta',
  'Conte',
  'Copac',
  'Copia',
  'Copie',
  'Copii',
  'Copil',
  'Copoi',
  'Covor',
  'Crapa',
  'Crede',
  'Crema',
  'Cresa',
  'Creta',
  'Crima',
  'Criza',
  'Cruce',
  'Crunt',
  'Cruta',
  'Cufar',
  'Cuget',
  'Cuier',
  'Culca',
  'Cules',
  'Culme',
  'Cumva',
  'Cupla',
  'Cuplu',
  'Curaj',
  'Curat',
  'Curba',
  'Curea',
  'Curge',
  'Cursa',
  'Curte',
  'Cusur',
  'Cutie',
  'Dalta',
  'Dativ',
  'Dator',
  'Dauna',
  'Debil',
  'Debut',
  'Decat',
  'Deces',
  'Decis',
  'Decor',
  'Deget',
  'Dejun',
  'Delta',
  'Desen',
  'Devia',
  'Dicta',
  'Dieta',
  'Difuz',
  'Dineu',
  'Dinte',
  'Divin',
  'Docil',
  'Doica',
  'Dolar',
  'Doliu',
  'Dormi',
  'Dosar',
  'Drama',
  'Drapa',
  'Drept',
  'Drona',
  'Dubiu',
  'Duhni',
  'Duios',
  'Dulap',
  'Dulce',
  'Dunga',
  'Durea',
  'Dusca',
  'Echer',
  'Ecran',
  'Edita',
  'Educa',
  'Efect',
  'Efort',
  'Elice',
  'Emite',
  'Enorm',
  'Epava',
  'Epoca',
  'Eroic',
  'Etala',
  'Etans',
  'Etapa',
  'Evada',
  'Evita',
  'Exact',
  'Exces',
  'Facla',
  'Faima',
  'Faina',
  'Falca',
  'Fanta',
  'Fapta',
  'Farsa',
  'Fatal',
  'Fauri',
  'Fazan',
  'Febra',
  'Felie',
  'Ferma',
  'Festa',
  'Ficat',
  'Fidel',
  'Fiere',
  'Fiica',
  'Final',
  'Firav',
  'Firma',
  'Fizic',
  'Flora',
  'Flota',
  'Fluid',
  'Foaie',
  'Foita',
  'Folos',
  'Fonta',
  'Forja',
  'Forma',
  'Forta',
  'Frana',
  'Frate',
  'Freca',
  'Frica',
  'Frige',
  'Front',
  'Fruct',
  'Fugar',
  'Fular',
  'Funie',
  'Furca',
  'Furie',
  'Fusta',
  'Gaina',
  'Galon',
  'Galop',
  'Gamba',
  'Garaj',
  'Garda',
  'Gasca',
  'Gaura',
  'Gauri',
  'Gazda',
  'Geana',
  'Gelos',
  'Geniu',
  'Ghici',
  'Ghips',
  'Gluga',
  'Gluma',
  'Goana',
  'Graba',
  'Grabi',
  'Grajd',
  'Grava',
  'Grefa',
  'Greoi',
  'Greva',
  'Grija',
  'Grila',
  'Gripa',
  'Grota',
  'Guler',
  'Gunoi',
  'Haina',
  'Haine',
  'Haita',
  'Hamal',
  'Harta',
  'Hobby',
  'Holba',
  'Hotar',
  'Hotel',
  'Hrana',
  'Hrani',
  'Iarba',
  'Iarna',
  'Ibric',
  'Ideal',
  'Idila',
  'Ierta',
  'Imens',
  'Imita',
  'Impar',
  'Inalt',
  'Incet',
  'Incie',
  'Indoi',
  'Infam',
  'Infia',
  'Inger',
  'Inima',
  'Intai',
  'Intim',
  'Intra',
  'Intre',
  'Invoi',
  'Irita',
  'Irosi',
  'Istet',
  'Iulie',
  'Iunie',
  'Izola',
  'Izvor',
  'Jefui',
  'Jeleu',
  'Jigni',
  'Jilav',
  'Joaca',
  'Joben',
  'Joule',
  'Judet',
  'Jupui',
  'Jurat',
  'Juriu',
  'Lacat',
  'Lacom',
  'Lalea',
  'Lampa',
  'Lance',
  'Langa',
  'Lansa',
  'Lapte',
  'Largi',
  'Larma',
  'Laser',
  'Latin',
  'Lauda',
  'Lauta',
  'Leafa',
  'Legal',
  'Lenes',
  'Lesin',
  'Liber',
  'Liceu',
  'Lider',
  'Limba',
  'Linie',
  'Linte',
  'Lipsa',
  'Liric',
  'Lista',
  'Litru',
  'Livra',
  'Locui',
  'Logic',
  'Loial',
  'Lucid',
  'Luciu',
  'Lucra',
  'Lucru',
  'Lunar',
  'Lupta',
  'Macar',
  'Macaz',
  'Magar',
  'Magic',
  'Magie',
  'Mahni',
  'Maica',
  'Maine',
  'Maior',
  'Major',
  'Manca',
  'Maner',
  'Mania',
  'Manie',
  'Manji',
  'Manta',
  'Manui',
  'Marai',
  'Marca',
  'Maree',
  'Maret',
  'Marfa',
  'Marti',
  'Masca',
  'Masea',
  'Masiv',
  'Matca',
  'Matur',
  'Maxim',
  'Medic',
  'Medie',
  'Mediu',
  'Menaj',
  'Mereu',
  'Merge',
  'Merit',
  'Mesaj',
  'Metal',
  'Metro',
  'Miere',
  'Milos',
  'Minge',
  'Minim',
  'Minor',
  'Minte',
  'Minti',
  'Minus',
  'Minut',
  'Miros',
  'Misca',
  'Moale',
  'Moara',
  'Mobil',
  'Model',
  'Molie',
  'Monta',
  'Moral',
  'Morar',
  'Mosie',
  'Motai',
  'Motiv',
  'Motor',
  'Motto',
  'Muget',
  'Mugur',
  'Mulge',
  'Mumie',
  'Munca',
  'Munte',
  'Musca',
  'Muzeu',
  'Namol',
  'Narav',
  'Narui',
  'Naste',
  'Natal',
  'Nazui',
  'Neamt',
  'Nebun',
  'Necaz',
  'Negot',
  'Negru',
  'Nepot',
  'Neted',
  'Nimic',
  'Ninge',
  'Nisip',
  'Niste',
  'Nitui',
  'Nivel',
  'Nobil',
  'Nociv',
  'Noroc',
  'Noroi',
  'Numai',
  'Numar',
  'Nunta',
  'Nutri',
  'O',
  'mie',
  'Oaste',
  'Oblon',
  'Obosi',
  'Obraz',
  'Ocara',
  'Ocean',
  'Ocupa',
  'Odata',
  'Odgon',
  'Odios',
  'Oferi',
  'Ofili',
  'Omida',
  'Omite',
  'Onest',
  'Onora',
  'Opera',
  'Optim',
  'Opune',
  'Ordin',
  'Orfan',
  'Organ',
  'Orice',
  'Ospat',
  'Ostas',
  'Ostil',
  'Pacat',
  'Pacla',
  'Pagan',
  'Pahar',
  'Paine',
  'Palat',
  'Palid',
  'Palma',
  'Panou',
  'Panta',
  'Panza',
  'Papuc',
  'Parau',
  'Parea',
  'Paria',
  'Paroh',
  'Parte',
  'Pasaj',
  'Pasiv',
  'Pasta',
  'Paste',
  'Pasti',
  'Patru',
  'Pauza',
  'Pazea',
  'Penaj',
  'Penar',
  'Penel',
  'Peria',
  'Perla',
  'Perna',
  'Peron',
  'Peste',
  'Petic',
  'Piata',
  'Picta',
  'Piele',
  'Pieri',
  'Piesa',
  'Pilda',
  'Pilot',
  'Pipai',
  'Piper',
  'Pirat',
  'Piron',
  'Pisca',
  'Pisic',
  'Pisoi',
  'Pista',
  'Pitic',
  'Placa',
  'Plaja',
  'Plana',
  'Plasa',
  'Plata',
  'Plati',
  'Pleca',
  'Pleda',
  'Plisc',
  'Plivi',
  'Plumb',
  'Pluta',
  'Poala',
  'Poate',
  'Podea',
  'Podis',
  'Pofta',
  'Pojar',
  'Polei',
  'Polua',
  'Pompa',
  'Ponei',
  'Popor',
  'Porni',
  'Posac',
  'Posta',
  'Potop',
  'Prada',
  'Praji',
  'Pranz',
  'Preda',
  'Preot',
  'Presa',
  'Preta',
  'Primi',
  'Print',
  'Pripa',
  'Priva',
  'Privi',
  'Priza',
  'Proba',
  'Prost',
  'Proza',
  'Pruna',
  'Prund',
  'Pudra',
  'Puhoi',
  'Pulsa',
  'Punct',
  'Punga',
  'Purta',
  'Putea',
  'Putin',
  'Rabda',
  'Racai',
  'Racni',
  'Radio',
  'Ragaz',
  'Raion',
  'Ramas',
  'Rapid',
  'Ratat',
  'Ratie',
  'Raton',
  'Ravna',
  'Razes',
  'Razui',
  'Rebel',
  'Rebut',
  'Refuz',
  'Regal',
  'Regla',
  'Releu',
  'Relua',
  'Reper',
  'Retea',
  'Reuni',
  'Reusi',
  'Rigid',
  'Rigla',
  'Rival',
  'Roade',
  'Roata',
  'Robot',
  'Roman',
  'Rosti',
  'Rugbi',
  'Ruina',
  'Runda',
  'Rupta',
  'Rural',
  'Sabie',
  'Sacai',
  'Salam',
  'Salta',
  'Salut',
  'Salva',
  'Sange',
  'Sanie',
  'Sansa',
  'Sapca',
  'Sapte',
  'Sapun',
  'Sarac',
  'Sarma',
  'Sarpe',
  'Sarut',
  'Satul',
  'Scalp',
  'Scapa',
  'Scara',
  'Scaun',
  'Scena',
  'Sclav',
  'Scobi',
  'Scoci',
  'Scrie',
  'Scrum',
  'Scuar',
  'Scula',
  'Scump',
  'Scund',
  'Scurt',
  'Scuti',
  'Scuza',
  'Seara',
  'Secat',
  'Secol',
  'Sedea',
  'Seism',
  'Semet',
  'Senin',
  'Serba',
  'Serie',
  'Serif',
  'Servi',
  'Sever',
  'Sezon',
  'Sfant',
  'Sfera',
  'Sfert',
  'Sfida',
  'Sifon',
  'Sigur',
  'Sipet',
  'Siret',
  'Siroi',
  'Sirop',
  'Situa',
  'Slabi',
  'Slava',
  'Sleit',
  'Soare',
  'Soclu',
  'Socru',
  'Sofer',
  'Solar',
  'Solid',
  'Sonda',
  'Sonet',
  'Sonor',
  'Sopti',
  'Sorbi',
  'Sorti',
  'Sosea',
  'Sovai',
  'Spala',
  'Spate',
  'Spera',
  'Spion',
  'Spirt',
  'Spita',
  'Spori',
  'Sport',
  'Spuma',
  'Spune',
  'Stalp',
  'Stand',
  'Stang',
  'Stare',
  'Staul',
  'Steag',
  'Stema',
  'Sterp',
  'Stima',
  'Stins',
  'Stire',
  'Stiva',
  'Stofa',
  'Strat',
  'Strop',
  'Subit',
  'Sueta',
  'Sufla',
  'Sumar',
  'Sunca',
  'Suplu',
  'Sursa',
  'Surub',
  'Suvoi',
  'Tabel',
  'Tabla',
  'Tacea',
  'Tacut',
  'Taina',
  'Talie',
  'Tanar',
  'Tanji',
  'Tapet',
  'Taram',
  'Taran',
  'Tarie',
  'Tarif',
  'Tarta',
  'Tarus',
  'Tasni',
  'Tatic',
  'Tavan',
  'Teaca',
  'Teama',
  'Teanc',
  'Teava',
  'Tenis',
  'Terci',
  'Teren',
  'Ticsi',
  'Tigla',
  'Tigru',
  'Tihna',
  'Timid',
  'Tinde',
  'Tinta',
  'Tinut',
  'Tipar',
  'Tipic',
  'Tiran',
  'Titei',
  'Titlu',
  'Toast',
  'Toiag',
  'Topai',
  'Topor',
  'Torta',
  'Trada',
  'Trage',
  'Trasa',
  'Trata',
  'Treaz',
  'Trece',
  'Trisa',
  'Trist',
  'Truda',
  'Trupa',
  'Tunde',
  'Tunel',
  'Turba',
  'Turla',
  'Turma',
  'Turna',
  'Ulita',
  'Ultim',
  'Umbla',
  'Umbre',
  'Umfla',
  'Umple',
  'Unchi',
  'Uncie',
  'Unghi',
  'Urban',
  'Urias',
  'Ursuz',
  'Usura',
  'Uzina',
  'Vaduv',
  'Vagon',
  'Vaita',
  'Valet',
  'Valid',
  'Valva',
  'Vapor',
  'Varga',
  'Varia',
  'Varsa',
  'Varui',
  'Varza',
  'Vasla',
  'Vatra',
  'Vechi',
  'Vecie',
  'Vecin',
  'Vedea',
  'Veghe',
  'Venin',
  'Venit',
  'Verde',
  'Verva',
  'Vesel',
  'Vesta',
  'Veste',
  'Viata',
  'Vibra',
  'Vicia',
  'Vifor',
  'Vinde',
  'Virus',
  'Visin',
  'Vital',
  'Vitel',
  'Vlaga',
  'Voiaj',
  'Voios',
  'Volan',
  'Volei',
  'Volum',
  'Vorba',
  'Vraja',
  'Vraji',
  'Vreme',
  'Vreun',
  'Vulpe',
  'Xerox',
  'Zacea',
  'Zadar',
  'Zahar',
  'Zarva',
  'Zavor',
  'Zbura',
  'Zeama',
  'Zebra',
  'Zefir',
  'Zeita',
  'Zgura',
  'Zodie',
  'Zvelt'
]

function getRandomWord() {
  return words[Math.floor(Math.random() * words.length)]
}

let word = getRandomWord()

function findColor(parent, child, index, line) {
  if (parent[index] === child[index]) {
    return 'rgb(96, 138, 84)'
  }

  let char = child[index]
  for (let i = 0; i < parent.length; ++i) {
    if (
      parent[i] == char &&
      line.children[i].style.backgroundColor !== 'rgb(96, 138, 84)'
    ) {
      return 'rgb(177, 160, 76)'
    }
  }

  if (char !== undefined) return 'rgb(58,58,60)'
}

function renderPastAttempt(row, attempt) {
  let line = grid.children[row]
  for (let i = 0; i < 5; ++i) {
    let col = line.children[i]
    col.style.backgroundColor = findColor(word, attempt, i, line)
    col.style.border =
      attempt[i] !== undefined
        ? `2.5px solid ${col.style.backgroundColor}`
        : '2.5px solid rgb(58,58,60)'
    col.innerHTML = attempt[i] ?? '<div style="opacity: 0">X<div>'
  }
}

function renderCurrentAttempt(row, attempt) {
  let line = grid.children[row]
  for (let i = 0; i < 5; ++i) {
    let col = line.children[i]
    col.innerHTML = attempt[i] ?? '<div style="opacity: 0">X<div>'
  }
}

createGrid()

let attempt = 0
let currentAttempt = ''

function logKey(e) {
  if (e.metaKey || e.ctrlKey || e.altKey) return
  let char = e.key.toLowerCase()
  if (char === 'backspace') {
    currentAttempt = currentAttempt.slice(0, -1)
    renderCurrentAttempt(attempt, currentAttempt)
  } else if (char === 'enter') {
    // more validation here

    // 1) word does not exist
    // 2) word is too short
    // 3) won the game

    renderPastAttempt(attempt, currentAttempt)
    attempt += 1
    currentAttempt = ''
  } else if (
    char.match(/[a-zA-Z]/) &&
    currentAttempt.length < 5 &&
    char.length === 1
  ) {
    currentAttempt += char
    renderCurrentAttempt(attempt, currentAttempt)
  }
}

document.addEventListener('keydown', logKey)
